# LottoGoGo 실행 계획 (PLAN.md)

## 1. MVP 범위

### 핵심 기능 (MVP Scope)
- CSV 기반 과거 로또 데이터 로딩 및 검증
- 베이지안 기반 번호별 점수 계산 엔진
- Boost/Penalty 휴리스틱 레이어
- 몬테카를로 샘플링 기반 조합 생성
- 필수 필터 파이프라인 (합계, AC값, 구간분산, 끝수, 홀짝, 고저, 과거당첨)
- 조합 랭킹 및 다양성 제약 적용
- Config 기반 파라미터 관리
- 백테스터 기본 기능

### MVP 제외 항목
- Web UI / API 엔드포인트
- 실시간 데이터 크롤링
- 사용자 인증/권한 관리
- 다국어 지원

---

## 2. Epic / Story / Task

### Epic 1: 데이터 레이어
| ID | Story | Task | 예상 시간 |
|----|-------|------|-----------|
| E1-S1 | CSV 데이터 로더 | T1: CSV 파서 구현 | 2h |
| | | T2: 데이터 검증 로직 | 2h |
| | | T3: 회차별 인덱싱 | 1h |
| E1-S2 | Config 관리자 | T1: YAML/JSON 파서 | 1h |
| | | T2: 기본값 설정 | 1h |
| | | T3: 검증 로직 | 1h |

### Epic 2: 점수 엔진 (핵심)
| ID | Story | Task | 예상 시간 |
|----|-------|------|-----------|
| E2-S1 | BaseScore 계산 | T1: Beta Distribution 구현 | 3h |
| | | T2: 베이지안 업데이트 | 2h |
| E2-S2 | Boost 레이어 | T1: Hot/Cold 판정 | 2h |
| | | T2: Neighbor/Carryover | 2h |
| | | T3: Reverse 관계 | 1h |
| E2-S3 | Penalty 레이어 | T1: Poisson Penalty | 3h |
| | | T2: Markov Penalty | 3h |
| | | T3: Ensemble 합산 | 1h |
| E2-S4 | 확률 변환 | T1: Softmax 정규화 | 1h |
| | | T2: Floor 적용 | 1h |

### Epic 3: 조합 생성기
| ID | Story | Task | 예상 시간 |
|----|-------|------|-----------|
| E3-S1 | 몬테카를로 샘플러 | T1: 가중치 샘플링 | 3h |
| | | T2: 중복 제거 | 1h |
| | | T3: 대량 생성 최적화 | 2h |

### Epic 4: 필터 파이프라인
| ID | Story | Task | 예상 시간 |
|----|-------|------|-----------|
| E4-S1 | 개별 필터 구현 | T1: 합계 필터 (100-175) | 1h |
| | | T2: AC값 필터 (≥7) | 1h |
| | | T3: 구간분산 필터 | 1h |
| | | T4: 끝수 필터 (≤2) | 1h |
| | | T5: 홀짝 필터 (2:4~4:2) | 1h |
| | | T6: 고저 균형 필터 | 1h |
| | | T7: 과거 당첨 필터 | 2h |
| E4-S2 | 파이프라인 조합 | T1: 체인 실행기 | 2h |
| | | T2: 탈락 사유 로깅 | 1h |

### Epic 5: 랭킹 & 다양성
| ID | Story | Task | 예상 시간 |
|----|-------|------|-----------|
| E5-S1 | 조합 점수 계산 | T1: 합산 점수 계산 | 1h |
| E5-S2 | 다양성 제약 | T1: 교집합 검사 | 2h |
| | | T2: 중복 조합 제거 | 1h |

### Epic 6: 백테스터
| ID | Story | Task | 예상 시간 |
|----|-------|------|-----------|
| E6-S1 | 워크포워드 엔진 | T1: 테스트 루프 구현 | 3h |
| | | T2: 기준선 생성기 | 1h |
| E6-S2 | 지표 계산 | T1: P(match≥3) 계산 | 2h |
| | | T2: 보조 지표 | 1h |
| | | T3: 리포트 생성 | 2h |

---

## 3. 우선순위 (Sprint 배치)

### Sprint 1 (Week 1-2): 기반 구축
- [P0] E1-S1: CSV 데이터 로더
- [P0] E1-S2: Config 관리자
- [P0] E2-S1: BaseScore 계산

### Sprint 2 (Week 3-4): 점수 엔진 완성
- [P0] E2-S2: Boost 레이어
- [P0] E2-S3: Penalty 레이어
- [P0] E2-S4: 확률 변환

### Sprint 3 (Week 5-6): 조합 생성 & 필터
- [P0] E3-S1: 몬테카를로 샘플러
- [P0] E4-S1: 개별 필터 구현
- [P1] E4-S2: 파이프라인 조합

### Sprint 4 (Week 7-8): 마무리
- [P1] E5-S1: 조합 점수 계산
- [P1] E5-S2: 다양성 제약
- [P1] E6-S1: 워크포워드 엔진
- [P2] E6-S2: 지표 계산

---

## 4. 리스크 분석

| 리스크 | 영향도 | 발생확률 | 대응 방안 |
|--------|--------|----------|-----------|
| 베이지안 모델 성능 미달 | 높음 | 중간 | 하이퍼파라미터 그리드 서치, Prior 조정 |
| 몬테카를로 샘플링 속도 저하 | 중간 | 중간 | NumPy 벡터화, 병렬 처리 도입 |
| 필터 조건 너무 엄격 | 중간 | 높음 | Config 기반 조건 완화 옵션 |
| 백테스트 과적합 | 높음 | 중간 | Holdout 세트 분리, 교차검증 |
| CSV 데이터 품질 이슈 | 중간 | 낮음 | 데이터 검증 단계 강화 |
| 재현성 보장 실패 | 높음 | 낮음 | 모든 랜덤 연산에 seed 고정 |

### 리스크 완화 전략
1. **조기 백테스트**: Sprint 2 종료 시점에 초기 백테스트 수행
2. **지속적 검증**: 모든 컴포넌트에 단위 테스트 필수
3. **Config 외부화**: 모든 매직 넘버 제거, Config로 관리
4. **로깅 강화**: 디버깅 용이성 확보
