# LottoGoGo Open Questions (미결 사항)

> **Version:** 1.0.0 Final  
> **최종 병합일:** 2026-02-08

---

## 1. 기술적 결정 사항

### 1.1 Boost 가중치 튜닝 [OPEN]
**질문:** 초기 가중치(Hot: 0.4, Cold: 0.15 등)는 백테스팅 후 조정 가능한가?

**현재 상태:**
- Hot: 0.4
- Cold: 0.15
- Neighbor: 0.3
- Carryover: 0.2
- Reverse: 0.1

**권장 조치:** 
- Sprint 2 종료 후 백테스트 결과 기반으로 그리드 서치 수행
- Config 기반 외부화 완료 시 런타임 조정 가능

---

### 1.2 필터 적용 순서 [OPEN]
**질문:** 필터 적용 순서가 성능에 영향을 미치는가?

**현재 상태:** 순차 적용 가정
- Sum → AC → Zone → Ending → OddEven → HighLow → History

**분석 필요:**
- [ ] 필터별 탈락률 측정 후 순서 최적화 검토
- [ ] 높은 탈락률 필터를 앞에 배치하여 성능 개선 가능성

---

### 1.3 Penalty λ 값 [OPEN]
**질문:** Poisson/Markov penalty의 λ1, λ2 기본값 결정 필요

**현재 상태:**
- poisson_lambda: 0.5
- markov_lambda: 0.3

**권장 조치:**
- 백테스트 민감도 분석 수행
- 0.1 ~ 1.0 범위에서 그리드 서치

---

### 1.4 다양성 임계값 [OPEN]
**질문:** 교집합 ≥4 기준은 조정 가능해야 하는가?

**현재 상태:** max_intersection = 3 (고정)

**권장 조치:**
- Config 파라미터로 외부화 완료
- 사용자 선호도에 따라 2~4 범위 조정 가능하게 구현

---

### 1.5 메모리 제약 [OPEN]
**질문:** 대규모 샘플(100,000+) 시 메모리 최적화 필요 여부

**현재 상태:** 
- 목표: < 500MB 피크 메모리
- 샘플 크기: 50,000 ~ 100,000

**권장 조치:**
- Chunk 단위 처리 고려
- Generator 패턴 적용 검토
- 벤치마크 테스트로 실제 사용량 측정

---

## 2. 데이터 관련 사항

### 2.1 CSV 인코딩 [RESOLVED]
**질문:** CSV 파일 인코딩 표준

**결정:** UTF-8 인코딩으로 통일
**상태:** ✅ 해결됨

---

### 2.2 최소 데이터 요구량 [RESOLVED]
**질문:** 분석에 필요한 최소 회차 수

**결정:** 최소 100회차 이상 필요
**상태:** ✅ 해결됨

---

### 2.3 번호 범위 [RESOLVED]
**질문:** 번호 범위 표준

**결정:** 한국 로또 기준 1~45 고정
**상태:** ✅ 해결됨

---

## 3. 아키텍처 관련 사항

### 3.1 병렬 처리 [DECISION NEEDED]
**질문:** 단일 프로세스 vs 멀티프로세싱

**현재 상태:** 단일 프로세스 가정 (MVP)

**고려 사항:**
- 샘플 생성 시 병렬화 이점 있음
- 복잡도 증가 vs 성능 개선 트레이드오프
- Phase 2에서 검토 예정

---

### 3.2 저장소 확장 [DECISION NEEDED]
**질문:** 파일 기반 → 데이터베이스 마이그레이션 시점

**현재 상태:** 파일 기반 (CSV/YAML/JSON)

**옵션:**
- SQLite: 로컬 개발/단일 사용자 (권장)
- PostgreSQL: 멀티 사용자/프로덕션

**결정 시점:** Phase 2 시작 전

---

## 4. API 관련 사항

### 4.1 인증 방식 [PENDING]
**질문:** API Key 발급 및 관리 방식

**현재 설계:** X-API-Key 헤더 기반

**미결정 사항:**
- [ ] 키 발급 프로세스
- [ ] 키 만료 정책
- [ ] 키 회전 전략

**상태:** Phase 2 구현 시 결정

---

### 4.2 Rate Limiting [PENDING]
**질문:** Rate Limit 세부 정책

**현재 설계:** 분당 60회

**미결정 사항:**
- [ ] 사용자 등급별 차등 적용?
- [ ] Burst 허용 정책?

**상태:** Phase 2 구현 시 결정

---

## 5. 테스트 관련 사항

### 5.1 커버리지 목표 [RESOLVED]
**질문:** 최소 코드 커버리지

**결정:** 85% 이상
**상태:** ✅ 해결됨

---

### 5.2 백테스트 기간 [RESOLVED]
**질문:** 백테스트 데이터 분할 비율

**결정:** Walk-Forward (롤링 윈도우) 방식으로 구현

**구현 방식:**
- 단순 분할(80/10/10) 대신 **Walk-Forward 검증** 적용
- 각 회차마다 이전 데이터로 학습 → 해당 회차 예측 → 실제 결과와 비교
- 예: 100회차 테스트 시 1~99회 데이터로 학습 후 100회 예측

**장점:**
- 더 현실적인 시뮬레이션 (실제 사용 환경과 동일)
- 모든 데이터를 테스트에 활용 가능
- 과적합 방지

**상태:** ✅ 해결됨 (`WalkForwardBacktester` 클래스로 구현)

---

## 6. TBD 정리

다음 항목들은 명시적으로 TBD(To Be Determined)로 표기된 항목입니다:

| 항목 | 문서 출처 | 상태 | 담당 |
|------|-----------|------|------|
| Boost 가중치 최적값 | TRD | OPEN | 엔진 팀 |
| Penalty λ 최적값 | TRD | OPEN | 엔진 팀 |
| 필터 순서 최적화 | TRD | OPEN | 엔진 팀 |
| API Key 관리 | API_SPEC | PENDING | 인프라 팀 |
| Rate Limit 정책 | API_SPEC | PENDING | 인프라 팀 |
| DB 마이그레이션 | DATA_MODEL | PENDING | 아키텍트 |

---

## 7. 우선순위별 조치 필요 항목

### P0 (MVP 전 반드시 결정)
- [x] 백테스트 데이터 분할 비율 확정 → **Walk-Forward 방식으로 해결**

### P1 (MVP 출시 후 결정 가능)
- [ ] Boost 가중치 최적화
- [ ] Penalty λ 값 튜닝
- [ ] 필터 순서 최적화

### P2 (Phase 2 전 결정)
- [ ] 병렬 처리 도입 여부
- [ ] 저장소 마이그레이션 계획
- [ ] API 인증 세부 정책

---

## 8. 충돌 해결 기록

### 해결된 충돌

| 항목 | 충돌 내용 | 해결 방안 |
|------|-----------|-----------|
| API 범위 | TRD에서는 API 제외, API_SPEC 문서 존재 | Phase 2 범위로 분류, 설계만 문서화 |
| 커버리지 목표 | TRD: 80%, TEST_PLAN: 85% | 85%로 통일 (높은 기준 적용) |
| 샘플 크기 | TRD: 50,000, API: 100,000 | 50,000 기본, 100,000 최대로 정리 |

---

*이 문서는 프로젝트 진행 중 지속적으로 업데이트됩니다.*
